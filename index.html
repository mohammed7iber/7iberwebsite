<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Print Shop Management System</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <div class="container-fluid">
        <div class="row">
            <!-- Sidebar Navigation -->
            <div class="col-md-2 sidebar">
                <h3 class="text-white text-center mb-4">Print Shop CRM</h3>
                <a href="#" class="active" data-section="dashboard">Dashboard</a>
                <a href="#" data-section="clients">Clients</a>
                <a href="#" data-section="orders">Orders</a>
                <a href="#" data-section="quotes">Quotes</a>
                <a href="#" data-section="invoices">Invoices</a>
                <a href="#" data-section="settings">Settings</a>
            </div>
            
            <!-- Main Content Area -->
            <div class="col-md-10 content">
                <!-- Dashboard Section -->
                <div id="dashboard" class="form-section active">
                    <h2>Dashboard</h2>
                    <div class="row mt-4">
                        <div class="col-md-3">
                            <div class="card text-white bg-primary">
                                <div class="card-body">
                                    <h5 class="card-title">Total Clients</h5>
                                    <p class="card-text display-4" id="totalClients">0</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="card text-white bg-success">
                                <div class="card-body">
                                    <h5 class="card-title">Active Orders</h5>
                                    <p class="card-text display-4" id="activeOrders">0</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="card text-white bg-warning">
                                <div class="card-body">
                                    <h5 class="card-title">Pending Quotes</h5>
                                    <p class="card-text display-4" id="pendingQuotes">0</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="card text-white bg-danger">
                                <div class="card-body">
                                    <h5 class="card-title">Unpaid Invoices</h5>
                                    <p class="card-text display-4" id="unpaidInvoices">0</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="row mt-4">
                        <div class="col-md-6">
                            <div class="card">
                                <div class="card-header">
                                    Recent Orders
                                </div>
                                <div class="card-body">
                                    <table class="table table-striped">
                                        <thead>
                                            <tr>
                                                <th>Order ID</th>
                                                <th>Client</th>
                                                <th>Status</th>
                                            </tr>
                                        </thead>
                                        <tbody id="recentOrdersTable">
                                            <!-- Will be populated with JavaScript -->
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="card">
                                <div class="card-header">
                                    Recent Clients
                                </div>
                                <div class="card-body">
                                    <table class="table table-striped">
                                        <thead>
                                            <tr>
                                                <th>Name</th>
                                                <th>Contact</th>
                                                <th>Location</th>
                                            </tr>
                                        </thead>
                                        <tbody id="recentClientsTable">
                                            <!-- Will be populated with JavaScript -->
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Clients Section -->
                <div id="clients" class="form-section">
                    <h2>Clients Management</h2>
                    <button class="btn btn-primary mb-3" data-bs-toggle="modal" data-bs-target="#addClientModal">Add New Client</button>
                    
                    <div class="card">
                        <div class="card-body">
                            <table id="clientTable" class="table table-striped">
                                <thead>
                                    <tr>
                                        <th>Name</th>
                                        <th>Contact Person</th>
                                        <th>Email</th>
                                        <th>Phone</th>
                                        <th>Location</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="clientTableBody">
                                    <!-- Will be populated with JavaScript -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                
                <!-- Orders Section -->
                <div id="orders" class="form-section">
                    <h2>Orders Management</h2>
                    <button class="btn btn-primary mb-3" data-bs-toggle="modal" data-bs-target="#addOrderModal">Create New Order</button>
                    
                    <div class="card">
                        <div class="card-body">
                            <table id="ordersTable" class="table table-striped">
                                <thead>
                                    <tr>
                                        <th>Order ID</th>
                                        <th>Client</th>
                                        <th>Description</th>
                                        <th>Dimensions</th>
                                        <th>Status</th>
                                        <th>Due Date</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="ordersTableBody">
                                    <!-- Will be populated with JavaScript -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                
                <!-- Quotes Section -->
                <div id="quotes" class="form-section">
                    <h2>Quotes Management</h2>
                    <button class="btn btn-primary mb-3" data-bs-toggle="modal" data-bs-target="#createQuoteModal">Create New Quote</button>
                    
                    <div class="card">
                        <div class="card-body">
                            <table class="table table-striped">
                                <thead>
                                    <tr>
                                        <th>Quote ID</th>
                                        <th>Client</th>
                                        <th>Date Created</th>
                                        <th>Total Amount</th>
                                        <th>Status</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="quotesTableBody">
                                    <!-- Will be populated with JavaScript -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                
                <!-- Invoices Section -->
                <div id="invoices" class="form-section">
                    <h2>Invoices Management</h2>
                    <button class="btn btn-primary mb-3" data-bs-toggle="modal" data-bs-target="#createInvoiceModal">Create New Invoice</button>
                    
                    <div class="card">
                        <div class="card-body">
                            <table class="table table-striped">
                                <thead>
                                    <tr>
                                        <th>Invoice ID</th>
                                        <th>Client</th>
                                        <th>Date Created</th>
                                        <th>Due Date</th>
                                        <th>Total Amount</th>
                                        <th>Status</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="invoicesTableBody">
                                    <!-- Will be populated with JavaScript -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                
                <!-- Settings Section -->
                <div id="settings" class="form-section">
                    <h2>System Settings</h2>
                    
                    <div class="card">
                        <div class="card-body">
                            <form id="settingsForm">
                                <div class="mb-3">
                                    <h4>Business Information</h4>
                                </div>
                                <div class="mb-3">
                                    <label for="businessName" class="form-label">Business Name</label>
                                    <input type="text" class="form-control" id="businessName">
                                </div>
                                <div class="mb-3">
                                    <label for="businessAddress" class="form-label">Business Address</label>
                                    <textarea class="form-control" id="businessAddress" rows="3"></textarea>
                                </div>
                                <div class="mb-3">
                                    <label for="businessPhone" class="form-label">Business Phone</label>
                                    <input type="text" class="form-control" id="businessPhone">
                                </div>
                                <div class="mb-3">
                                    <label for="businessEmail" class="form-label">Business Email</label>
                                    <input type="email" class="form-control" id="businessEmail">
                                </div>
                                
                                <div class="mb-3 mt-4">
                                    <h4>Print Services</h4>
                                </div>
                                <div id="printServices">
                                    <div class="row mb-2 print-service-row">
                                        <div class="col-md-5">
                                            <input type="text" class="form-control" placeholder="Service Name (e.g., Banner Printing)">
                                        </div>
                                        <div class="col-md-3">
                                            <input type="number" class="form-control" placeholder="Base Price">
                                        </div>
                                        <div class="col-md-3">
                                            <select class="form-select">
                                                <option>Per Item</option>
                                                <option>Per Square Foot</option>
                                                <option>Per Square Meter</option>
                                                <option>Per Hour</option>
                                            </select>
                                        </div>
                                        <div class="col-md-1">
                                            <button type="button" class="btn btn-danger remove-service">×</button>
                                        </div>
                                    </div>
                                </div>
                                <button type="button" class="btn btn-secondary mt-2" id="addServiceBtn">Add Service</button>
                                
                                <div class="mt-4">
                                    <button type="submit" class="btn btn-primary">Save Settings</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Add Client Modal -->
<!-- Replace your existing client modal with this enhanced version -->
<div class="modal fade" id="addClientModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Add/Edit Client</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form id="addClientForm">
                    <ul class="nav nav-tabs" id="clientTabs" role="tablist">
                        <li class="nav-item" role="presentation">
                            <button class="nav-link active" id="client-info-tab" data-bs-toggle="tab" 
                                data-bs-target="#client-info" type="button" role="tab" 
                                aria-controls="client-info" aria-selected="true">Client Info</button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="branches-tab" data-bs-toggle="tab" 
                                data-bs-target="#branches" type="button" role="tab" 
                                aria-controls="branches" aria-selected="false">Branches</button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="pricing-tab" data-bs-toggle="tab" 
                                data-bs-target="#pricing" type="button" role="tab" 
                                aria-controls="pricing" aria-selected="false">Pricing</button>
                        </li>
                    </ul>
                    
                    <div class="tab-content pt-3" id="clientTabContent">
                        <!-- Client Info Tab -->
                        <div class="tab-pane fade show active" id="client-info" role="tabpanel" aria-labelledby="client-info-tab">
                            <div class="mb-3">
                                <label for="clientName" class="form-label">Client Name/Company</label>
                                <input type="text" class="form-control" id="clientName" required>
                            </div>
                            <div class="mb-3">
                                <label for="contactPerson" class="form-label">Main Contact Person</label>
                                <input type="text" class="form-control" id="contactPerson">
                            </div>
                            <div class="mb-3">
                                <label for="clientEmail" class="form-label">Main Email</label>
                                <input type="email" class="form-control" id="clientEmail">
                            </div>
                            <div class="mb-3">
                                <label for="clientPhone" class="form-label">Main Phone</label>
                                <input type="text" class="form-control" id="clientPhone">
                            </div>
                            <div class="mb-3">
                                <label for="clientNotes" class="form-label">Client Notes</label>
                                <textarea class="form-control" id="clientNotes" rows="3"></textarea>
                            </div>
                        </div>
                        
                        <!-- Branches Tab -->
                        <div class="tab-pane fade" id="branches" role="tabpanel" aria-labelledby="branches-tab">
                            <div class="d-flex justify-content-between align-items-center mb-3">
                                <h5 class="mb-0">Client Branches</h5>
                                <button type="button" class="btn btn-sm btn-primary" id="addBranchBtn">
                                    <i class="bi bi-plus"></i> Add Branch
                                </button>
                            </div>
                            
                            <div id="branchesList">
                                <!-- Branch items will be added here dynamically -->
                                <div class="alert alert-info">Add your first branch using the button above.</div>
                            </div>
                        </div>

                        <div class="tab-pane fade" id="pricing" role="tabpanel" aria-labelledby="pricing-tab">
                            <div class="d-flex justify-content-between align-items-center mb-3 mt-3">
                                <h5 class="mb-0">Material Price List</h5>
                                <button type="button" class="btn btn-sm btn-primary" id="addMaterialPriceBtn">
                                    <i class="bi bi-plus"></i> Add Material Price
                                </button>
                            </div>
                            
                            <div class="table-responsive">
                                <table class="table table-bordered" id="clientPriceTable">
                                    <thead>
                                        <tr>
                                            <th>Material</th>
                                            <th>Pricing Method</th>
                                            <th>Unit Price</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody id="clientPriceTableBody">
                                        <tr id="noClientPricesRow">
                                            <td colspan="4" class="text-center">No price items yet. Add your first material price.</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-primary" id="saveClientBtn">Save Client</button>
            </div>
        </div>
    </div>
</div>

<!-- Add this modal to your index.html file after the client modal -->
<div class="modal fade" id="editBranchModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Edit Branch</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form id="editBranchForm">
                    <input type="hidden" id="branchId">
                    <div class="mb-3">
                        <label for="branchName" class="form-label">Branch Name</label>
                        <input type="text" class="form-control" id="branchName" required>
                    </div>
                    <div class="mb-3">
                        <label for="branchLocation" class="form-label">Location/Address</label>
                        <textarea class="form-control" id="branchLocation" rows="2"></textarea>
                    </div>
                    <div class="mb-3">
                        <label for="branchContact" class="form-label">Contact Person</label>
                        <input type="text" class="form-control" id="branchContact">
                    </div>
                    <div class="mb-3">
                        <label for="branchPhone" class="form-label">Phone</label>
                        <input type="text" class="form-control" id="branchPhone">
                    </div>
                    <div class="mb-3">
                        <label for="branchEmail" class="form-label">Email</label>
                        <input type="email" class="form-control" id="branchEmail">
                    </div>
                    <div class="mb-3">
                        <label for="branchNotes" class="form-label">Notes</label>
                        <textarea class="form-control" id="branchNotes" rows="2"></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-primary" id="saveBranchBtn">Save Branch</button>
            </div>
        </div>
    </div>
</div>

<!-- Branch Template (will be used to create branch cards via JavaScript) -->
<template id="branchTemplate">
    <div class="card mb-3 branch-item" data-branch-id="">
        <div class="card-header d-flex justify-content-between align-items-center">
            <h6 class="mb-0 branch-name">Branch Name</h6>
            <div>
                <button type="button" class="btn btn-sm btn-warning edit-branch-btn">Edit</button>
                <button type="button" class="btn btn-sm btn-danger remove-branch-btn">Remove</button>
            </div>
        </div>
        <div class="card-body">
            <div class="row mb-2">
                <div class="col-md-6">
                    <strong>Location:</strong> <span class="branch-location"></span>
                </div>
                <div class="col-md-6">
                    <strong>Contact:</strong> <span class="branch-contact"></span>
                </div>
            </div>
            <div class="d-flex justify-content-between align-items-center">
                <h6>Print Locations (<span class="print-locations-count">0</span>)</h6>
                <button type="button" class="btn btn-sm btn-success add-print-location-btn">
                    <i class="bi bi-plus"></i> Add Print Location
                </button>
            </div>
            <div class="print-locations-list mt-2">
                <!-- Print locations will be added here -->
            </div>
        </div>
    </div>
</template>

<!-- Add this modal to your index.html file after the branch modal -->
<div class="modal fade" id="printLocationModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Add/Edit Print Location</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form id="printLocationForm">
                    <input type="hidden" id="printLocationId">
                    <input type="hidden" id="printLocationBranchId">
                    
                    <div class="mb-3">
                        <label for="printLocationName" class="form-label">Location Name</label>
                        <input type="text" class="form-control" id="printLocationName" required>
                    </div>
                    <div class="mb-3">
                        <label for="printLocationDescription" class="form-label">Description</label>
                        <textarea class="form-control" id="printLocationDescription" rows="2"></textarea>
                    </div>
                    
                    <h5 class="mt-4">Dimensions</h5>
                    <div class="row">
                        <div class="col-md-6">
                            <h6>Inner Dimensions</h6>
                            <div class="mb-3 row">
                                <label for="innerWidth" class="col-sm-4 col-form-label">Width</label>
                                <div class="col-sm-8">
                                    <div class="input-group">
                                        <input type="number" class="form-control" id="innerWidth" step="0.01">
                                        <select class="form-select" id="widthUnit" style="max-width: 80px;">
                                            <option value="in">in</option>
                                            <option value="cm">cm</option>
                                            <option value="mm">mm</option>
                                            <option value="m">m</option>
                                            <option value="ft">ft</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <div class="mb-3 row">
                                <label for="innerHeight" class="col-sm-4 col-form-label">Height</label>
                                <div class="col-sm-8">
                                    <div class="input-group">
                                        <input type="number" class="form-control" id="innerHeight" step="0.01">
                                        <select class="form-select" id="heightUnit" style="max-width: 80px;">
                                            <option value="in">in</option>
                                            <option value="cm">cm</option>
                                            <option value="mm">mm</option>
                                            <option value="m">m</option>
                                            <option value="ft">ft</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <div class="mb-3 row">
                                <label for="innerDepth" class="col-sm-4 col-form-label">Depth</label>
                                <div class="col-sm-8">
                                    <div class="input-group">
                                        <input type="number" class="form-control" id="innerDepth" step="0.01">
                                        <select class="form-select" id="depthUnit" style="max-width: 80px;">
                                            <option value="in">in</option>
                                            <option value="cm">cm</option>
                                            <option value="mm">mm</option>
                                            <option value="m">m</option>
                                            <option value="ft">ft</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-md-6">
                            <h6>Outer Dimensions</h6>
                            <div class="mb-3 row">
                                <label for="outerWidth" class="col-sm-4 col-form-label">Width</label>
                                <div class="col-sm-8">
                                    <div class="input-group">
                                        <input type="number" class="form-control" id="outerWidth" step="0.01">
                                        <select class="form-select" id="outerWidthUnit" style="max-width: 80px;">
                                            <option value="in">in</option>
                                            <option value="cm">cm</option>
                                            <option value="mm">mm</option>
                                            <option value="m">m</option>
                                            <option value="ft">ft</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <div class="mb-3 row">
                                <label for="outerHeight" class="col-sm-4 col-form-label">Height</label>
                                <div class="col-sm-8">
                                    <div class="input-group">
                                        <input type="number" class="form-control" id="outerHeight" step="0.01">
                                        <select class="form-select" id="outerHeightUnit" style="max-width: 80px;">
                                            <option value="in">in</option>
                                            <option value="cm">cm</option>
                                            <option value="mm">mm</option>
                                            <option value="m">m</option>
                                            <option value="ft">ft</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <div class="mb-3 row">
                                <label for="outerDepth" class="col-sm-4 col-form-label">Depth</label>
                                <div class="col-sm-8">
                                    <div class="input-group">
                                        <input type="number" class="form-control" id="outerDepth" step="0.01">
                                        <select class="form-select" id="outerDepthUnit" style="max-width: 80px;">
                                            <option value="in">in</option>
                                            <option value="cm">cm</option>
                                            <option value="mm">mm</option>
                                            <option value="m">m</option>
                                            <option value="ft">ft</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="mb-3 mt-3">
                        <label for="printLocationImage" class="form-label">Location Image</label>
                        <input type="file" class="form-control" id="printLocationImage" accept="image/*">
                        <div id="imagePreviewContainer" class="mt-2 d-none">
                            <img id="imagePreview" class="img-fluid img-thumbnail" style="max-height: 200px;">
                            <button type="button" class="btn btn-sm btn-danger mt-1" id="removeImageBtn">Remove Image</button>
                        </div>
                    </div>
                    
                    <div class="mb-3">
                        <label for="printLocationNotes" class="form-label">Notes</label>
                        <textarea class="form-control" id="printLocationNotes" rows="2"></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-primary" id="savePrintLocationBtn">Save Location</button>
            </div>
        </div>
    </div>
</div>

<!-- Print Location Card Template -->
<template id="printLocationTemplate">
    <div class="card mb-2 print-location-item" data-location-id="">
        <div class="card-header py-2 d-flex justify-content-between align-items-center">
            <h6 class="mb-0 location-name">Location Name</h6>
            <div>
                <button type="button" class="btn btn-sm btn-warning edit-location-btn">Edit</button>
                <button type="button" class="btn btn-sm btn-danger remove-location-btn">Remove</button>
            </div>
        </div>
        <div class="card-body py-2">
            <div class="row">
                <div class="col-md-6">
                    <p class="mb-1 location-description">Description text here</p>
                    <small class="location-dimensions">
                        <strong>Inner:</strong> <span class="inner-dimensions">0 x 0 x 0</span><br>
                        <strong>Outer:</strong> <span class="outer-dimensions">0 x 0 x 0</span>
                    </small>
                </div>
                <div class="col-md-6 text-center">
                    <img class="location-image img-fluid img-thumbnail" src="" alt="Location image" style="max-height: 100px; display: none;">
                    <p class="no-image-text">No image available</p>
                </div>
            </div>
        </div>
    </div>
</template>

    <!-- Add Order Modal -->
    <div class="modal fade" id="addOrderModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Create New Order</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="addOrderForm">
                        <div class="mb-3">
                            <label for="orderClient" class="form-label">Client</label>
                            <select class="form-select" id="orderClient" required>
                                <option value="">Select Client</option>
                                <!-- Will be populated with JavaScript -->
                            </select>
                        </div>
                        <div class="mb-3">
                            <label for="orderDescription" class="form-label">Description</label>
                            <textarea class="form-control" id="orderDescription" rows="2" required></textarea>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Print Specifications</label>
                            <div class="row">
                                <div class="col-md-4">
                                    <label for="printWidth" class="form-label">Width</label>
                                    <div class="input-group mb-3">
                                        <input type="number" class="form-control" id="printWidth" step="0.01">
                                        <select class="form-select" id="widthUnit">
                                            <option value="in">inches</option>
                                            <option value="cm">cm</option>
                                            <option value="m">meters</option>
                                            <option value="ft">feet</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <label for="printHeight" class="form-label">Height</label>
                                    <div class="input-group mb-3">
                                        <input type="number" class="form-control" id="printHeight" step="0.01">
                                        <select class="form-select" id="heightUnit">
                                            <option value="in">inches</option>
                                            <option value="cm">cm</option>
                                            <option value="m">meters</option>
                                            <option value="ft">feet</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <label for="printQuantity" class="form-label">Quantity</label>
                                    <input type="number" class="form-control" id="printQuantity" value="1" min="1">
                                </div>
                            </div>
                        </div>
                        <div class="mb-3">
                            <label for="printType" class="form-label">Print Type</label>
                            <select class="form-select" id="printType">
                                <option value="">Select Print Type</option>
                                <option>Banner</option>
                                <option>Poster</option>
                                <option>Flyer</option>
                                <option>Business Card</option>
                                <option>Brochure</option>
                                <option>Custom</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label for="printMaterial" class="form-label">Material</label>
                            <select class="form-select" id="printMaterial">
                                <option value="">Select Material</option>
                                <option>Vinyl</option>
                                <option>Glossy Paper</option>
                                <option>Matte Paper</option>
                                <option>Card Stock</option>
                                <option>Canvas</option>
                                <option>Other</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label for="dueDate" class="form-label">Due Date</label>
                            <input type="date" class="form-control" id="dueDate">
                        </div>
                        <div class="mb-3">
                            <label for="orderNotes" class="form-label">Additional Notes</label>
                            <textarea class="form-control" id="orderNotes" rows="3"></textarea>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-success" id="createQuoteFromOrderBtn">Create Quote</button>
                    <button type="button" class="btn btn-primary" id="saveOrderBtn">Save Order</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Create Quote Modal -->
    <div class="modal fade" id="createQuoteModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Create Quote</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="createQuoteForm">
                        <div class="mb-3">
                            <label for="quoteClient" class="form-label">Client</label>
                            <select class="form-select" id="quoteClient" required>
                                <option value="">Select Client</option>
                                <!-- Will be populated with JavaScript -->
                            </select>
                        </div>
                        <div class="mb-3">
                            <label for="quoteOrder" class="form-label">Based on Order (Optional)</label>
                            <select class="form-select" id="quoteOrder">
                                <option value="">Select Order or Leave Empty for New Quote</option>
                                <!-- Will be populated with JavaScript -->
                            </select>
                        </div>
                        
                        <div class="mb-3">
                            <label class="form-label">Quote Items</label>
                            <div id="quoteItems">
                                <div class="row mb-2 quote-item-row">
                                    <div class="col-md-4">
                                        <input type="text" class="form-control item-description" placeholder="Item Description" required>
                                    </div>
                                    <div class="col-md-2">
                                        <input type="number" class="form-control item-quantity" placeholder="Qty" min="1" value="1" required>
                                    </div>
                                    <div class="col-md-2">
                                        <input type="number" step="0.01" class="form-control item-price" placeholder="Unit Price" required>
                                    </div>
                                    <div class="col-md-3">
                                        <input type="number" step="0.01" class="form-control item-total" placeholder="Total" readonly>
                                    </div>
                                    <div class="col-md-1">
                                        <button type="button" class="btn btn-danger remove-item">×</button>
                                    </div>
                                </div>
                            </div>
                            <button type="button" class="btn btn-secondary mt-2" id="addQuoteItemBtn">Add Item</button>
                        </div>
                        
                        <div class="row mb-3">
                            <div class="col-md-8"></div>
                            <div class="col-md-4">
                                <div class="input-group mb-2">
                                    <span class="input-group-text">Subtotal</span>
                                    <input type="text" class="form-control" id="quoteSubtotal" readonly>
                                </div>
                                <div class="input-group mb-2">
                                    <span class="input-group-text">Tax (%)</span>
                                    <input type="number" class="form-control" id="quoteTaxRate" value="0" min="0" max="100">
                                </div>
                                <div class="input-group mb-2">
                                    <span class="input-group-text">Tax Amount</span>
                                    <input type="text" class="form-control" id="quoteTaxAmount" readonly>
                                </div>
                                <div class="input-group">
                                    <span class="input-group-text">Total</span>
                                    <input type="text" class="form-control" id="quoteTotal" readonly>
                                </div>
                            </div>
                        </div>
                        
                        <div class="mb-3">
                            <label for="quoteNotes" class="form-label">Notes</label>
                            <textarea class="form-control" id="quoteNotes" rows="3"></textarea>
                        </div>
                        <div class="mb-3">
                            <label for="quoteValidUntil" class="form-label">Valid Until</label>
                            <input type="date" class="form-control" id="quoteValidUntil">
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" id="saveQuoteBtn">Save Quote</button>
                    <button type="button" class="btn btn-success" id="previewQuoteBtn">Preview Quote</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Create Invoice Modal -->
    <div class="modal fade" id="createInvoiceModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Create Invoice</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="createInvoiceForm">
                        <div class="mb-3">
                            <label for="invoiceClient" class="form-label">Client</label>
                            <select class="form-select" id="invoiceClient" required>
                                <option value="">Select Client</option>
                                <!-- Will be populated with JavaScript -->
                            </select>
                        </div>
                        <div class="mb-3">
                            <label for="invoiceQuote" class="form-label">Based on Quote (Optional)</label>
                            <select class="form-select" id="invoiceQuote">
                                <option value="">Select Quote or Leave Empty for New Invoice</option>
                                <!-- Will be populated with JavaScript -->
                            </select>
                        </div>
                        
                        <div class="mb-3">
                            <label class="form-label">Invoice Items</label>
                            <div id="invoiceItems">
                                <div class="row mb-2 invoice-item-row">
                                    <div class="col-md-4">
                                        <input type="text" class="form-control item-description" placeholder="Item Description" required>
                                    </div>
                                    <div class="col-md-2">
                                        <input type="number" class="form-control item-quantity" placeholder="Qty" min="1" value="1" required>
                                    </div>
                                    <div class="col-md-2">
                                        <input type="number" step="0.01" class="form-control item-price" placeholder="Unit Price" required>
                                    </div>
                                    <div class="col-md-3">
                                        <input type="number" step="0.01" class="form-control item-total" placeholder="Total" readonly>
                                    </div>
                                    <div class="col-md-1">
                                        <button type="button" class="btn btn-danger remove-item">×</button>
                                    </div>
                                </div>
                            </div>
                            <button type="button" class="btn btn-secondary mt-2" id="addInvoiceItemBtn">Add Item</button>
                        </div>
                        
                        <div class="row mb-3">
                            <div class="col-md-8"></div>
                            <div class="col-md-4">
                                <div class="input-group mb-2">
                                    <span class="input-group-text">Subtotal</span>
                                    <input type="text" class="form-control" id="invoiceSubtotal" readonly>
                                </div>
                                <div class="input-group mb-2">
                                    <span class="input-group-text">Tax (%)</span>
                                    <input type="number" class="form-control" id="invoiceTaxRate" value="0" min="0" max="100">
                                </div>
                                <div class="input-group mb-2">
                                    <span class="input-group-text">Tax Amount</span>
                                    <input type="text" class="form-control" id="invoiceTaxAmount" readonly>
                                </div>
                                <div class="input-group">
                                    <span class="input-group-text">Total</span>
                                    <input type="text" class="form-control" id="invoiceTotal" readonly>
                                </div>
                            </div>
                        </div>
                        
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label for="invoiceDate" class="form-label">Invoice Date</label>
                                <input type="date" class="form-control" id="invoiceDate">
                            </div>
                            <div class="col-md-6">
                                <label for="invoiceDueDate" class="form-label">Due Date</label>
                                <input type="date" class="form-control" id="invoiceDueDate">
                            </div>
                        </div>
                        
                        <div class="mb-3">
                            <label for="invoiceNotes" class="form-label">Notes</label>
                            <textarea class="form-control" id="invoiceNotes" rows="3"></textarea>
                        </div>
                        
                        <div class="mb-3">
                            <label for="invoicePaymentTerms" class="form-label">Payment Terms</label>
                            <select class="form-select" id="invoicePaymentTerms">
                                <option value="Due on Receipt">Due on Receipt</option>
                                <option value="Net 15">Net 15</option>
                                <option value="Net 30">Net 30</option>
                                <option value="Net 45">Net 45</option>
                                <option value="Net 60">Net 60</option>
                                <option value="Custom">Custom</option>
                            </select>
                        </div>
                        
                        <div class="mb-3">
                            <label for="invoicePaymentMethod" class="form-label">Payment Method</label>
                            <select class="form-select" id="invoicePaymentMethod">
                                <option value="">Select Payment Method</option>
                                <option value="Cash">Cash</option>
                                <option value="Check">Check</option>
                                <option value="Credit Card">Credit Card</option>
                                <option value="Bank Transfer">Bank Transfer</option>
                                <option value="PayPal">PayPal</option>
                                <option value="Other">Other</option>
                            </select>
                        </div>
                        
                        <div class="mb-3">
                            <label for="invoiceStatus" class="form-label">Status</label>
                            <select class="form-select" id="invoiceStatus">
                                <option value="Draft">Draft</option>
                                <option value="Pending" selected>Pending</option>
                                <option value="Sent">Sent</option>
                                <option value="Paid">Paid</option>
                                <option value="Overdue">Overdue</option>
                                <option value="Cancelled">Cancelled</option>
                            </select>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" id="saveInvoiceBtn">Save Invoice</button>
                    <button type="button" class="btn btn-success" id="previewInvoiceBtn">Preview Invoice</button>
                    <button type="button" class="btn btn-info" id="emailInvoiceBtn">Email Invoice</button>
                    </div>
                </div>
            </div>
        </div>
    
        <!-- Quote Preview Modal -->
        <div class="modal fade" id="previewQuoteModal" tabindex="-1" aria-hidden="true">
            <div class="modal-dialog modal-lg">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">Quote Preview</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body" id="quotePreviewContent">
                        <!-- Will be populated with JavaScript -->
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                        <button type="button" class="btn btn-primary" id="printQuoteBtn">Print</button>
                        <button type="button" class="btn btn-success" id="emailQuoteBtn">Email</button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Invoice Preview Modal -->
        <div class="modal fade" id="previewInvoiceModal" tabindex="-1" aria-hidden="true">
            <div class="modal-dialog modal-lg">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">Invoice Preview</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body" id="invoicePreviewContent">
                        <!-- Will be populated with JavaScript -->
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                        <button type="button" class="btn btn-primary" id="printInvoiceBtn">Print</button>
                        <button type="button" class="btn btn-success" id="downloadInvoicePdfBtn">Download PDF</button>
                        <button type="button" class="btn btn-info" id="sendInvoiceEmailBtn">Send Email</button>
                    </div>
                </div>
            </div>
        </div>
    
        
        <!-- Price List Modal -->
<div class="modal fade" id="priceListModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Client Price Lists</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="mb-3">
                    <label for="priceListClient" class="form-label">Client</label>
                    <select class="form-select" id="priceListClient">
                        <option value="">Select Client</option>
                        <!-- Will be populated with JavaScript -->
                    </select>
                </div>

                <div id="priceListContainer" class="mt-4">
                    <div class="d-flex justify-content-between align-items-center mb-3">
                        <h5 class="mb-0">Material Pricing</h5>
                        <button type="button" class="btn btn-sm btn-primary" id="addPriceItemBtn">
                            <i class="bi bi-plus"></i> Add Material Price
                        </button>
                    </div>
                    
                    <div class="table-responsive">
                        <table class="table table-bordered" id="priceListTable">
                            <thead>
                                <tr>
                                    <th>Material</th>
                                    <th>Pricing Method</th>
                                    <th>Unit Price</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="priceListTableBody">
                                <tr id="noPricesRow">
                                    <td colspan="4" class="text-center">No price items yet. Add your first material price using the button above.</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary" id="savePriceListBtn">Save Price List</button>
            </div>
        </div>
    </div>
</div>

<!-- Add Price Item Modal -->
<div class="modal fade" id="addPriceItemModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Add/Edit Material Price</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form id="priceItemForm">
                    <input type="hidden" id="priceItemId">
                    <div class="mb-3">
                        <label for="priceMaterial" class="form-label">Material</label>
                        <select class="form-select" id="priceMaterial" required>
                            <option value="">Select Material</option>
                            <option value="Vinyl">Vinyl</option>
                            <option value="Glossy Paper">Glossy Paper</option>
                            <option value="Matte Paper">Matte Paper</option>
                            <option value="Card Stock">Card Stock</option>
                            <option value="Canvas">Canvas</option>
                            <option value="Banner Material">Banner Material</option>
                            <option value="Adhesive Vinyl">Adhesive Vinyl</option>
                            <option value="Fabric">Fabric</option>
                            <option value="Other">Other</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label for="otherMaterial" class="form-label">Other Material (specify)</label>
                        <input type="text" class="form-control" id="otherMaterial" disabled>
                    </div>
                    <div class="mb-3">
                        <label for="pricingMethod" class="form-label">Pricing Method</label>
                        <select class="form-select" id="pricingMethod" required>
                            <option value="Per Square Meter">Per Square Meter</option>
                            <option value="Per Square Foot">Per Square Foot</option>
                            <option value="Per Item">Per Item</option>
                            <option value="Per Linear Meter">Per Linear Meter</option>
                            <option value="Per Linear Foot">Per Linear Foot</option>
                            <option value="Per Hour">Per Hour</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label for="unitPrice" class="form-label">Unit Price</label>
                        <div class="input-group">
                            <span class="input-group-text">JOD</span>
                            <input type="number" class="form-control" id="unitPrice" step="0.01" min="0" required>
                        </div>
                    </div>
                    <div class="mb-3">
                        <label for="priceNotes" class="form-label">Notes</label>
                        <textarea class="form-control" id="priceNotes" rows="2"></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-primary" id="savePriceItemBtn">Save</button>
            </div>
        </div>
    </div>
</div>
        <!-- JavaScript Libraries -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
        
        <!-- Application Scripts -->
        <script src="js/app.js"></script>
        <script src="js/clients.js"></script>
        <script src="js/orders.js"></script>
        <script src="js/quotes.js"></script>
        <script src="js/invoices.js"></script>
        <script src="js/price-list.js"></script>

        <!-- Initialization Script -->
        <script>
            // Ensure DOM is loaded before initializing the application
            document.addEventListener('DOMContentLoaded', function() {
                console.log('Document loaded, initializing application...');
                
                // Initialize dashboard
                updateDashboard();
                
                // Load settings
                loadSettings();
                
                // Load client table data for dropdowns
                loadClientTable();
                
                console.log('Application initialization complete');
            });
        </script>

    </body>
    </html>